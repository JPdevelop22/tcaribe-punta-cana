const travels = 
{
    "pickups": 
    {
        "Hoteles Bavaro Punta Cana": 
        {
            "name-ES": "Hoteles de la zona Bavaro, Punta Cana",
            "name-EN": "Hotels in Bavaro, Punta Cana area",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"] 			

        },

        "Hoteles Uvero Alto": 
        {
            "name-ES": "Hoteles en Uvero Alto",
            "name-EN": "Hotels in Uvero Alto",
            "stops": [],
            "destiny-ES": ["PUJ", "La Romana", "Boca Chica-Aila"],
            "destiny-EN": ["PUJ", "La Romana", "Boca Chica-Aila"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },

        "Hoteles Higuey": 
        { 
            "name-ES": "Hoteles en Higüey",
            "name-EN": "Hotels in Higüey",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },

        "Hoteles Bayahibe": 
        {
            "name-ES": "Hoteles en Bayahíbe",
            "name-EN": "Hotels in Bayahíbe",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },	

        "Hoteles La Romana": 
        { 
            "name-ES": "Hoteles en La Romana",
            "name-EN": "Hotels in La Romana",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },	

        "Hoteles Santana": 
        {
            "name-ES": "Hoteles en Santana Play.n",
            "name-EN": "Hotels in Santana Play.n",
            "stops": ["La Romana"],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },

        "Hoteles Juan Dolio": 
        {
            "name-ES": "Hoteles en Juan Dolio",
            "name-EN": "Hotels in Juan Dolio",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },	
    
        "Hoteles Boca Chica": {
            "name-ES": "Hoteles en Boca Chica",
            "name-EN": "Hotels in Boca Chica",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },

        "Hoteles Santo Domingo": 
        {
            "name-ES": "Hoteles en Santo Domingo",
            "name-EN": "Hotels in Santo Domingo",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },

        "Hoteles Santiago": 
        {
            "name-ES": "Hoteles en Santiago",
            "name-EN": "Hotels in Santiago",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 1,
            "passengers": ["1 - 6", "7 - 21", "22 - 33"] 			

        },

        "Hoteles Puerto Plata": 
        {
            "name-ES": "Hoteles en Puerto Plata",
            "name-EN": "Hotels in Puerto Plata",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 1,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },

        "Hoteles Samana": 
        {
            "name-ES": "Hoteles en Samaná",
            "name-EN": "Hotels in Samaná",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 1,
            "passengers": ["1 - 6", "7 - 21", "22 - 33"] 			

        },

        "Hoteles Sabana de la Mar": 
        {
            "name-ES": "Hoteles en Sabana de la Mar",
            "name-EN": "Hotels in Sabana de la Mar",
            "stops": [],
            "destiny-ES": ["PUJ"],
            "destiny-EN": ["PUJ"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			

        },

        "PUJ": 
        {
            "name-ES": "Aeropuerto Internacional de Punta Cana",
            "name-EN": "Punta Cana Internacional airport",
            "stops": [],
            "destiny-ES": ["Hoteles de la zona Bavaro, Punta Cana", "Hoteles en Uvero Alto", "Hoteles en La Romana", "San Pedro de Macorís", "El Seibo", "Boca Chica", "Santo Domingo", "Santiago", "Samaná", "Puerto Plata"],
            "destiny-EN": ["Hotels in Bavaro, Punta Cana area", "Hotels in Uvero Alto", "Hotels in La Romana", "San Pedro de Macorís", "El Seibo", "Boca Chica", "Santo Domingo", "Santiago", "Samaná", "Puerto Plata"],
            "tracks": 2,
            "passengers": ["1 - 6", "7 - 21", "22 - 33", "34 - 45", "46 - 54", "55 - 59"]			
        } 
    }
}

const pricesEs = 
{
    "pickups":
    {
        "Hoteles de la zona Bavaro, Punta Cana":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 31.0,
                                "7 - 21": 85.0,
                                "22 - 33": 118.0,
                                "34 - 45": 145.0,
                                "46 - 54": 175.0,
                                "55 - 59": 189.0
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 61.0,
                                "7 - 21": 156.0,
                                "22 - 33": 219.0,
                                "34 - 45": 269.0,
                                "46 - 54": 323.0,
                                "55 - 59": 350.0
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Uvero Alto":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 76.0,
                                "7 - 21": 123.0,
                                "22 - 33": 181.0,
                                "34 - 45": 213.0,
                                "46 - 54": 268.0,
                                "55 - 59": 282.0
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 141,
                                "7 - 21": 227,
                                "22 - 33": 334.0,
                                "34 - 45": 395,
                                "46 - 54": 496.0,
                                "55 - 59": 523.0
                            }
                        }
                    }
                },

                "La Romana":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 124,
                                "7 - 21": 209,
                                "22 - 33": 283,
                                "34 - 45": 340,
                                "46 - 54": 359,
                                "55 - 59": 374
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 231,
                                "7 - 21": 385,
                                "22 - 33": 524,
                                "34 - 45": 630,
                                "46 - 54": 685,
                                "55 - 59": 693
                            }
                        }
                    }
                },

                "Boca Chica-Aila":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 168,
                                "7 - 21": 287,
                                "22 - 33": 358,
                                "34 - 45": 508,
                                "46 - 54": 629,
                                "55 - 59": 642
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 313,
                                "7 - 21": 530,
                                "22 - 33": 661,
                                "34 - 45": 940,
                                "46 - 54": 1162,
                                "55 - 59": 1188
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Higüey":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 76,
                                "7 - 21": 123,
                                "22 - 33": 181,
                                "34 - 45": 213,
                                "46 - 54": 268,
                                "55 - 59": 282
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 141,
                                "7 - 21": 227,
                                "22 - 33": 334,
                                "34 - 45": 395,
                                "46 - 54": 496,
                                "55 - 59": 523
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Bayahíbe":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 113,
                                "7 - 21": 189,
                                "22 - 33": 257,
                                "34 - 45": 310,
                                "46 - 54": 327,
                                "55 - 59": 340
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 209,
                                "7 - 21": 350,
                                "22 - 33": 476,
                                "34 - 45": 572,
                                "46 - 54": 605,
                                "55 - 59": 630
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en La Romana":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 113,
                                "7 - 21": 189,
                                "22 - 33": 257,
                                "34 - 45": 310,
                                "46 - 54": 327,
                                "55 - 59": 340
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 209,
                                "7 - 21": 350,
                                "22 - 33": 476,
                                "34 - 45": 572,
                                "46 - 54": 605,
                                "55 - 59": 630
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Juan Dolio":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 129,
                                "7 - 21": 219,
                                "22 - 33": 267,
                                "34 - 45": 350,
                                "46 - 54": 433,
                                "55 - 59": 445
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 238,
                                "7 - 21": 404,
                                "22 - 33": 497,
                                "34 - 45": 647,
                                "46 - 54": 800,
                                "55 - 59": 823
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Boca Chica":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 145,
                                "7 - 21": 247,
                                "22 - 33": 303,
                                "34 - 45": 396,
                                "46 - 54": 492,
                                "55 - 59": 505
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 270,
                                "7 - 21": 408,
                                "22 - 33": 559,
                                "34 - 45": 751,
                                "46 - 54": 909,
                                "55 - 59": 933
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Santo Domingo":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 154,
                                "7 - 21": 260,
                                "22 - 33": 324,
                                "34 - 45": 462,
                                "46 - 54": 572,
                                "55 - 59": 585
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 284,
                                "7 - 21": 482,
                                "22 - 33": 601,
                                "34 - 45": 852,
                                "46 - 54": 1057,
                                "55 - 59": 1082
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Santiago":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 350,
                                "7 - 21": 599,
                                "22 - 33": 744,
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Puerto Plata":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 332,
                                "7 - 21": 626,
                                "22 - 33": 777,
                                "34 - 45": 870,
                                "46 - 54": 1042,
                                "55 - 59": 1057
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Samaná":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 395,
                                "7 - 21": 666,
                                "22 - 33": 827,
                            }
                        }
                    }
                }
            }
        },

        "Hoteles en Sabana de la Mar":
        {
            "destiny":
            {
                "PUJ":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 154,
                                "7 - 21": 260,
                                "22 - 33": 324,
                                "34 - 45": 484,
                                "46 - 54": 629,
                                "55 - 59": 633
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 284,
                                "7 - 21": 482,
                                "22 - 33": 601,
                                "34 - 45": 896,
                                "46 - 54": 1162,
                                "55 - 59": 1170
                            }
                        }
                    }
                }
            }
        },

        "Aeropuerto Internacional de Punta Cana":
        {
            "destiny":
            {
                "Hoteles de la zona Bavaro, Punta Cana":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 31.0,
                                "7 - 21": 85.0,
                                "22 - 33": 118.0,
                                "34 - 45": 145.0,
                                "46 - 54": 175.0,
                                "55 - 59": 189.0
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 61.0,
                                "7 - 21": 156.0,
                                "22 - 33": 219.0,
                                "34 - 45": 269.0,
                                "46 - 54": 323.0,
                                "55 - 59": 350.0
                            }
                        }
                    }
                },

                "Hoteles en Uvero Alto":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 76.0,
                                "7 - 21": 123.0,
                                "22 - 33": 181.0,
                                "34 - 45": 213.0,
                                "46 - 54": 268.0,
                                "55 - 59": 282.0
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 141,
                                "7 - 21": 227,
                                "22 - 33": 334.0,
                                "34 - 45": 395,
                                "46 - 54": 496.0,
                                "55 - 59": 523.0
                            }
                        }
                    }
                },

                "Hoteles en La Romana":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 113,
                                "7 - 21": 189,
                                "22 - 33": 257,
                                "34 - 45": 310,
                                "46 - 54": 327,
                                "55 - 59": 340
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 209,
                                "7 - 21": 350,
                                "22 - 33": 476,
                                "34 - 45": 572,
                                "46 - 54": 605,
                                "55 - 59": 630
                            }
                        }
                    }
                },

                "San Pedro de Macorís":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": "Consultelo con el proveedor",
                                "7 - 21": "Consultelo con el proveedor",
                                "22 - 33": "Consultelo con el proveedor",
                                "34 - 45": "Consultelo con el proveedor",
                                "46 - 54": "Consultelo con el proveedor",
                                "55 - 59": "Consultelo con el proveedor"
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": "Consultelo con el proveedor",
                                "7 - 21": "Consultelo con el proveedor",
                                "22 - 33": "Consultelo con el proveedor",
                                "34 - 45": "Consultelo con el proveedor",
                                "46 - 54": "Consultelo con el proveedor",
                                "55 - 59": "Consultelo con el proveedor"
                            }
                        }
                    }
                },

                "El Seibo":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": "Consultelo con el proveedor",
                                "7 - 21": "Consultelo con el proveedor",
                                "22 - 33": "Consultelo con el proveedor",
                                "34 - 45": "Consultelo con el proveedor",
                                "46 - 54": "Consultelo con el proveedor",
                                "55 - 59": "Consultelo con el proveedor"
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": "Consultelo con el proveedor",
                                "7 - 21": "Consultelo con el proveedor",
                                "22 - 33": "Consultelo con el proveedor",
                                "34 - 45": "Consultelo con el proveedor",
                                "46 - 54": "Consultelo con el proveedor",
                                "55 - 59": "Consultelo con el proveedor"
                            }
                        }
                    }
                },

                "Boca Chica":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 145,
                                "7 - 21": 247,
                                "22 - 33": 303,
                                "34 - 45": 396,
                                "46 - 54": 492,
                                "55 - 59": 505
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 270,
                                "7 - 21": 408,
                                "22 - 33": 559,
                                "34 - 45": 751,
                                "46 - 54": 909,
                                "55 - 59": 933
                            }
                        }
                    }
                },

                "Santo Domingo":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 154,
                                "7 - 21": 260,
                                "22 - 33": 324,
                                "34 - 45": 462,
                                "46 - 54": 572,
                                "55 - 59": 585
                            }
                        },
                        
                        2:
                        {
                            "passengers":
                            {
                                "1 - 6": 284,
                                "7 - 21": 482,
                                "22 - 33": 601,
                                "34 - 45": 852,
                                "46 - 54": 1057,
                                "55 - 59": 1082
                            }
                        }
                    }
                },

                "Santiago":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 350,
                                "7 - 21": 599,
                                "22 - 33": 744,
                            }
                        }
                    }
                },
                
                "Samaná":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 395,
                                "7 - 21": 666,
                                "22 - 33": 827,
                            }
                        }
                    }
                },

                "Puerto Plata":
                {
                    "tracks":
                    {
                        1: 
                        {
                            "passengers":
                            {
                                "1 - 6": 332,
                                "7 - 21": 626,
                                "22 - 33": 777,
                                "34 - 45": 870,
                                "46 - 54": 1042,
                                "55 - 59": 1057
                            }
                        }
                    }
                },
            }
        },
    }
}

const pickups = Object.values(travels.pickups)

const drawPickupsSelect = (pickups) => {
    $("#startContainer").html(
        '<label for="pickUpPoints">Punto de recogida</label>' +
        '<select name="pickUpPoints" id="pickUpPoints" required>' +
            '<option value=""></option>' +
        '</select>'        
    )

    pickups.forEach((pickup) => {
        let optionValue = `${pickup["name-ES"]} . ${pickup["stops"]} . ${pickup["destiny-ES"]} . ${pickup["tracks"]} . ${pickup["passengers"]}`
        $('#pickUpPoints').append(
            `<option value="${optionValue}">${pickup["name-ES"]}</option>`
        )
    })
}

const drawTracksSelect = (tracks) => {
    $("#tracksContainer").html(
        '<label for="tracks">Punto de recogida</label>' +
        '<select name="tracks" id="tracks" required>' +
            '<option value="1">1 via</option>' +
        '</select>'        
    )

    if (tracks > 1) {
        for (let i = 2; i <= tracks; i++) {
            $('#tracks').append(
                `<option value="${i}">${i} vias</option>`
            )
        }
    }
}

const drawStopsSelect = (stops) => {
    $("#stopContainer").html(
        '<label for="stops">Punto de parada</label>' +
        '<select name="stops" id="stops" required>' +
            '<option value=""></option>' +
        '</select>'        
    )

    stops.forEach(stop => {
        $('#stops').append(
            `<option value="${stop}">${stop}</option>`
        )
    })
}

const removeStopSelect = () => $('#stopContainer').empty()

const drawDestinySelect = (destinies) => {
    $("#destinyContainer").html(
        '<label for="destinies">Destino</label>' +
        '<select name="destinies" id="destinies" required>' +
            '<option value=""></option>' +
        '</select>'        
    )

    destinies.forEach(destiny => {
        $('#destinies').append(
            `<option value="${destiny}">${destiny}</option>`
        )
    })
}

const drawPassengersSelect = (passgersCount) => {
    $("#passengersContainer").html(
        '<label for="passengers">Pasajeros</label>' +
        '<select name="passengers" id="passengers" required>' +
            '<option value=""></option>' +
        '</select>'        
    )

    passgersCount.forEach(passengers => {
        $('#passengers').append(
            `<option value="${passengers}">De ${passengers} pasajeros</option>`
        )
    })
}

$(document).ready(() => {
    $('#bookType').on('change', (e) => {
        if (e.target.value === 'viaje turistico') {
            drawPickupsSelect(pickups)
        }
        console.log("changing...")
    })
    
    $('#startContainer').on('change', '#pickUpPoints', (e) => {
        const [name, stops, destiny, tracks, passengers] = e.target.value.split(' . ')

        drawTracksSelect(tracks)

        if (stops) {
            drawStopsSelect(stops.split(","))
        } else {
            removeStopSelect()
        }

        console.log(destiny)
        drawDestinySelect(destiny.split(","))

        console.log(passengers)
        drawPassengersSelect(passengers.split(","))
    })

    $('#bookForm').on('submit', (e) => {
        e.preventDefault()

        let message
        if (e.target.stops) {
            message = 
                e.target.bookType.value + ' | ' +
                e.target.tracks.value + ' | ' +
                e.target.pickUpPoints.value + ' | ' +
                e.target.stops.value + ' | ' +
                e.target.destinies.value + ' | ' +
                e.target.bookDate.value + ' | ' +
                e.target.passengers.value
        } else {
            message = 
                e.target.bookType.value + ' | ' +
                e.target.tracks.value + ' | ' +
                e.target.pickUpPoints.value + ' | ' +
                e.target.destinies.value + ' | ' +
                e.target.bookDate.value + ' | ' +
                e.target.passengers.value
        }

        console.log(message)
    })

})

